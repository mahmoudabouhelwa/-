# تطبيق مكتب الأفوكاتو للمحاماة

هذا التطبيق هو نظام مكتبي لإدارة مكاتب المحاماة، تم تطويره باستخدام Electron و React.

## المتطلبات الأساسية

قبل البدء، تأكد من تثبيت:
1.  [Node.js](https://nodejs.org/) (الإصدار 18 أو أحدث).
2.  أدوات بناء Windows. يمكنك تثبيتها عبر PowerShell كمسؤول:
    ```powershell
    npm install --global --production windows-build-tools
    ```
3.  [Python](https://www.python.org/downloads/) (إصدار متوافق مثل 3.11).

## خطوات التثبيت والتشغيل

1.  **استنساخ المستودع (Clone Repository):**
    إذا كان المشروع على Git، قم باستنساخه. إذا كان لديك مجلد المشروع مباشرة، انتقل للخطوة التالية.

2.  **تثبيت الحزم (مهم):**
    لضمان توافق الحزم الأصلية (مثل قاعدة البيانات) مع Electron، اتبع الخطوات التالية بدقة:
    
    أ. **(إذا كنت تقوم بالتثبيت لأول مرة بعد مشكلة) احذف المجلد `node_modules` وملف `package-lock.json` إن وجدا.**
    
    ب. افتح الطرفية (Terminal) أو موجه الأوامر (Command Prompt) في مجلد المشروع وقم بتشغيل الأمر التالي لتثبيت جميع الحزم وإعادة بناء الوحدات الأصلية:
    ```bash
    npm install
    ```
    *ملاحظة: قد تستغرق هذه العملية وقتاً أطول من المعتاد لأنها تقوم بإعادة بناء الحزم.*

3.  **تشغيل التطبيق:**
    بعد انتهاء التثبيت بنجاح، قم بتشغيل التطبيق في وضع التطوير باستخدام الأمر:
    ```bash
    npm start
    ```
    سيتم فتح نافذة التطبيق.

## استكشاف الأخطاء وإصلاحها

**خطأ `ModuleNotFoundError: No module named 'distutils'` أثناء `npm install`:**

هذا الخطأ يحدث إذا كنت تستخدم إصدار Python حديث (3.12 أو أحدث) حيث تمت إزالة `distutils`.
**الحل:** افتح موجه الأوامر (Command Prompt) أو PowerShell **كمسؤول** وقم بتشغيل الأمر التالي:
```bash
pip install setuptools
```
بعد ذلك، احذف `node_modules` و `package-lock.json` ثم قم بتشغيل `npm install` مرة أخرى.


## معلومات تسجيل الدخول الافتراضية

-   **اسم المستخدم:** `admin`
-   **كلمة المرور:** `admin123`

## إعداد مساعد الذكاء الاصطناعي (AI Assistant)

يستخدم التطبيق Gemini API لتقديم المساعدة القانونية. لتفعيل هذه الميزة، يجب عليك توفير مفتاح API الخاص بك.

1.  قم بإنشاء ملف جديد في المجلد الرئيسي للمشروع باسم `.env`.
2.  افتح ملف `.env` وأضف السطر التالي، مع استبدال `YOUR_GEMINI_API_KEY` بمفتاحك الفعلي:
    ```
    API_KEY=YOUR_GEMINI_API_KEY
    ```
3.  احفظ الملف. سيقوم التطبيق تلقائيًا بتحميل المفتاح عند بدء التشغيل.

**مهم:** لا تشارك ملف `.env` أو مفتاح API الخاص بك مع أي شخص.

## قاعدة البيانات

-   يستخدم التطبيق قاعدة بيانات SQLite محلية.
-   يتم إنشاء ملف قاعدة البيانات `app_data.db` تلقائيًا عند أول تشغيل في المجلد الرئيسي للمشروع.

## النسخ الاحتياطي

-   **تلقائي:** يتم إنشاء نسخة احتياطية من قاعدة البيانات يوميًا في الساعة 2:00 صباحًا.
-   **يدوي:** يمكن إنشاء نسخة احتياطية في أي وقت بالضغط على زر "نسخ احتياطي يدوي" في الشريط الجانبي.
-   يتم حفظ جميع النسخ الاحتياطية في مجلد `backups` داخل مجلد المشروع.

## بناء نسخة تنفيذية (EXE)

لإنشاء ملف تثبيت `.exe` مستقل لنظام ويندوز، قم بتشغيل الأمر التالي:

```bash
npm run dist
```

بعد انتهاء العملية، ستجد ملف التثبيت داخل مجلد `dist` الذي سيتم إنشاؤه في المشروع.
